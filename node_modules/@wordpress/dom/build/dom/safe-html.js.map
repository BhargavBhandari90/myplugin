{"version":3,"sources":["@wordpress/dom/src/dom/safe-html.js"],"names":["safeHTML","html","body","document","implementation","createHTMLDocument","innerHTML","elements","getElementsByTagName","elementIndex","length","element","tagName","attributeIndex","attributes","name","key","startsWith","removeAttribute"],"mappings":";;;;;;;;;AAGA;;AAHA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,QAAT,CAAmBC,IAAnB,EAA0B;AACxC,QAAM;AAAEC,IAAAA;AAAF,MAAWC,QAAQ,CAACC,cAAT,CAAwBC,kBAAxB,CAA4C,EAA5C,CAAjB;AACAH,EAAAA,IAAI,CAACI,SAAL,GAAiBL,IAAjB;AACA,QAAMM,QAAQ,GAAGL,IAAI,CAACM,oBAAL,CAA2B,GAA3B,CAAjB;AACA,MAAIC,YAAY,GAAGF,QAAQ,CAACG,MAA5B;;AAEA,SAAQD,YAAY,EAApB,EAAyB;AACxB,UAAME,OAAO,GAAGJ,QAAQ,CAAEE,YAAF,CAAxB;;AAEA,QAAKE,OAAO,CAACC,OAAR,KAAoB,QAAzB,EAAoC;AACnC,2BAAQD,OAAR;AACA,KAFD,MAEO;AACN,UAAIE,cAAc,GAAGF,OAAO,CAACG,UAAR,CAAmBJ,MAAxC;;AAEA,aAAQG,cAAc,EAAtB,EAA2B;AAC1B,cAAM;AAAEE,UAAAA,IAAI,EAAEC;AAAR,YAAgBL,OAAO,CAACG,UAAR,CAAoBD,cAApB,CAAtB;;AAEA,YAAKG,GAAG,CAACC,UAAJ,CAAgB,IAAhB,CAAL,EAA8B;AAC7BN,UAAAA,OAAO,CAACO,eAAR,CAAyBF,GAAzB;AACA;AACD;AACD;AACD;;AAED,SAAOd,IAAI,CAACI,SAAZ;AACA","sourcesContent":["/**\n * Internal dependencies\n */\nimport remove from './remove';\n\n/**\n * Strips scripts and on* attributes from HTML.\n *\n * @param {string} html HTML to sanitize.\n *\n * @return {string} The sanitized HTML.\n */\nexport default function safeHTML( html ) {\n\tconst { body } = document.implementation.createHTMLDocument( '' );\n\tbody.innerHTML = html;\n\tconst elements = body.getElementsByTagName( '*' );\n\tlet elementIndex = elements.length;\n\n\twhile ( elementIndex-- ) {\n\t\tconst element = elements[ elementIndex ];\n\n\t\tif ( element.tagName === 'SCRIPT' ) {\n\t\t\tremove( element );\n\t\t} else {\n\t\t\tlet attributeIndex = element.attributes.length;\n\n\t\t\twhile ( attributeIndex-- ) {\n\t\t\t\tconst { name: key } = element.attributes[ attributeIndex ];\n\n\t\t\t\tif ( key.startsWith( 'on' ) ) {\n\t\t\t\t\telement.removeAttribute( key );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn body.innerHTML;\n}\n"]}